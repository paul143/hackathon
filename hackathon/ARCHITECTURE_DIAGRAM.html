
<!DOCTYPE html>
<html>
<head>
    <title>Architecture Diagram</title>
    <style>
        body { margin: 0; padding: 0; }
        svg { display: block; }
    </style>
</head>
<body>
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="1200" viewBox="0 0 1600 1200">
  <!-- Background -->
  <rect width="1600" height="1200" fill="white"/>
  
  <!-- Title -->
  <text x="50" y="50" font-size="32" font-weight="bold" fill="#333333">Insurance Onboarding Platform - High-Level Architecture</text>
  
  <!-- ========== LAYER 1: FRONTEND ========== -->
  <!-- Frontend boxes -->
  <rect x="50" y="100" width="250" height="80" fill="#E3F2FD" stroke="#333333" stroke-width="2"/>
  <text x="175" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Angular 16</text>
  <text x="175" y="165" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Frontend</text>
  
  <rect x="350" y="100" width="250" height="80" fill="#E3F2FD" stroke="#333333" stroke-width="2"/>
  <text x="475" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Login</text>
  <text x="475" y="165" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Component</text>
  
  <rect x="650" y="100" width="250" height="80" fill="#E3F2FD" stroke="#333333" stroke-width="2"/>
  <text x="775" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Onboarding</text>
  <text x="775" y="165" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Wizard</text>
  
  <rect x="950" y="100" width="250" height="80" fill="#E3F2FD" stroke="#333333" stroke-width="2"/>
  <text x="1075" y="145" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Real-time</text>
  <text x="1075" y="165" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Updates</text>
  
  <!-- Arrows down from frontend -->
  <line x1="175" y1="180" x2="175" y2="240" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="475" y1="180" x2="475" y2="240" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="775" y1="180" x2="775" y2="240" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="1075" y1="180" x2="1075" y2="240" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 2: API GATEWAYS ========== -->
  <rect x="50" y="240" width="400" height="80" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="250" y="290" text-anchor="middle" font-size="18" font-weight="bold" fill="#000000">API Gateway (REST)</text>
  
  <rect x="500" y="240" width="400" height="80" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="700" y="290" text-anchor="middle" font-size="18" font-weight="bold" fill="#000000">API Gateway (WebSocket)</text>
  
  <!-- Arrows to Lambda -->
  <line x1="250" y1="320" x2="150" y2="380" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="320" x2="400" y2="380" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="320" x2="600" y2="380" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="320" x2="800" y2="380" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 3: LAMBDA FUNCTIONS ========== -->
  <rect x="50" y="380" width="180" height="70" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="140" y="415" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Submit User</text>
  <text x="140" y="435" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Info</text>
  
  <rect x="280" y="380" width="180" height="70" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="370" y="415" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Process</text>
  <text x="370" y="435" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Documents</text>
  
  <rect x="510" y="380" width="180" height="70" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="600" y="415" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Perform</text>
  <text x="600" y="435" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">KYC</text>
  
  <rect x="740" y="380" width="180" height="70" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="830" y="415" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Generate</text>
  <text x="830" y="435" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Policy Recs</text>
  
  <!-- Arrows to Kafka Producer -->
  <line x1="140" y1="450" x2="140" y2="510" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="370" y1="450" x2="370" y2="510" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="450" x2="600" y2="510" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="830" y1="450" x2="830" y2="510" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 4: KAFKA PRODUCER ========== -->
  <rect x="50" y="510" width="900" height="70" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="500" y="550" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">Kafka Producer (Non-Blocking) â†’ Publishes Events to Topics</text>
  
  <!-- Arrow to MSK -->
  <line x1="500" y1="580" x2="500" y2="640" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 5: AWS MSK CLUSTER ========== -->
  <rect x="150" y="640" width="700" height="80" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="500" y="670" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">AWS MSK (Kafka Cluster) - 3 Brokers</text>
  <text x="500" y="695" text-anchor="middle" font-size="14" fill="#000000">SCRAM-SHA-512 Auth | TLS Encryption</text>
  
  <!-- Topics label -->
  <text x="500" y="740" text-anchor="middle" font-size="12" fill="#333333">
    6 Topics: user-info-submitted | documents-processed | kyc-verified | policy-recommended | workflow-completed | errors
  </text>
  
  <!-- Arrows to Consumers -->
  <line x1="250" y1="720" x2="250" y2="780" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="500" y1="720" x2="500" y2="780" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="720" x2="750" y2="780" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 6: KAFKA CONSUMERS ========== -->
  <rect x="100" y="780" width="280" height="70" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="240" y="815" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Consumer:</text>
  <text x="240" y="835" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Event Logger</text>
  
  <rect x="430" y="780" width="280" height="70" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="570" y="815" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Consumer:</text>
  <text x="570" y="835" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">WebSocket</text>
  
  <rect x="760" y="780" width="280" height="70" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="900" y="815" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">Consumer:</text>
  <text x="900" y="835" text-anchor="middle" font-size="14" font-weight="bold" fill="#000000">SNS Notifier</text>
  
  <!-- Arrows to downstream -->
  <line x1="240" y1="850" x2="240" y2="910" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="850" x2="350" y2="910" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="900" y1="850" x2="900" y2="910" stroke="#333333" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- ========== LAYER 7: DATA & SERVICES ========== -->
  <rect x="100" y="910" width="280" height="70" fill="#E8F5E9" stroke="#333333" stroke-width="2"/>
  <text x="240" y="950" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">DynamoDB</text>
  <text x="240" y="970" text-anchor="middle" font-size="14" fill="#000000">(8 Tables)</text>
  
  <rect x="430" y="910" width="280" height="70" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="570" y="950" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">WebSocket API</text>
  <text x="570" y="970" text-anchor="middle" font-size="14" fill="#000000">(Real-time Push)</text>
  
  <rect x="760" y="910" width="280" height="70" fill="#FCE4EC" stroke="#333333" stroke-width="2"/>
  <text x="900" y="950" text-anchor="middle" font-size="16" font-weight="bold" fill="#000000">SNS</text>
  <text x="900" y="970" text-anchor="middle" font-size="14" fill="#000000">(Notifications)</text>
  
  <!-- Arrow back to frontend -->
  <line x1="570" y1="910" x2="1075" y2="180" stroke="#666666" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-gray)"/>
  
  <!-- ========== LEGEND ========== -->
  <text x="50" y="1050" font-size="16" font-weight="bold" fill="#333333">Legend:</text>
  
  <rect x="50" y="1080" width="80" height="40" fill="#E3F2FD" stroke="#333333" stroke-width="2"/>
  <text x="150" y="1105" font-size="14" fill="#000000">Frontend/UI</text>
  
  <rect x="450" y="1080" width="80" height="40" fill="#FFF3E0" stroke="#333333" stroke-width="2"/>
  <text x="550" y="1105" font-size="14" fill="#000000">APIs/Lambda</text>
  
  <rect x="850" y="1080" width="80" height="40" fill="#F3E5F5" stroke="#333333" stroke-width="2"/>
  <text x="950" y="1105" font-size="14" fill="#000000">Event Streaming</text>
  
  <rect x="1250" y="1080" width="80" height="40" fill="#E8F5E9" stroke="#333333" stroke-width="2"/>
  <text x="1350" y="1105" font-size="14" fill="#000000">Storage/Data</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333333" />
    </marker>
    <marker id="arrowhead-gray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666666" />
    </marker>
  </defs>
</svg></body></html>